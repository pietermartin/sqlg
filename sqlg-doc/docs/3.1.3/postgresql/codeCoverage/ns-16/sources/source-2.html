


<!DOCTYPE html>
<html id="htmlId">
<head>
  <meta http-equiv="Content-Type" content="text/html;charset=UTF-8"> 
  <title>Coverage Report > TestBulkWithin</title>
  <style type="text/css">
    @import "../../css/coverage.css";
    @import "../../css/idea.min.css";
  </style>
  <script type="text/javascript" src="../../js/highlight.min.js"></script>
  <script type="text/javascript" src="../../js/highlightjs-line-numbers.min.js"></script>
</head>

<body>
<div class="content">
<div class="breadCrumbs">
Current scope:     <a href="../../index.html">all classes</a>
    <span class="separator">|</span>
    <a href="../index.html">org.umlg.sqlg.test.gremlincompile</a>
</div>

<h1>Coverage Summary for Class: TestBulkWithin (org.umlg.sqlg.test.gremlincompile)</h1>

<table class="coverageStats">
<tr>
  <th class="name">Class</th>
<th class="coverageStat 
">
  Class, %
</th>
<th class="coverageStat 
">
  Method, %
</th>
<th class="coverageStat 
">
  Branch, %
</th>
<th class="coverageStat 
">
  Line, %
</th>
</tr>
<tr>
  <td class="name">TestBulkWithin</td>
<td class="coverageStat">
  <span class="percent">
    100%
  </span>
  <span class="absValue">
    (1/1)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    100%
  </span>
  <span class="absValue">
    (43/43)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    66.7%
  </span>
  <span class="absValue">
    (20/30)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    98.8%
  </span>
  <span class="absValue">
    (500/506)
  </span>
</td>
</tr>

</table>

<br/>
<br/>


<pre>
<code class="sourceCode" id="sourceCode">&nbsp;package org.umlg.sqlg.test.gremlincompile;
&nbsp;
&nbsp;import com.fasterxml.jackson.databind.ObjectMapper;
&nbsp;import com.fasterxml.jackson.databind.node.ObjectNode;
&nbsp;import org.apache.commons.lang3.time.StopWatch;
&nbsp;import org.apache.tinkerpop.gremlin.process.traversal.P;
&nbsp;import org.apache.tinkerpop.gremlin.structure.T;
&nbsp;import org.apache.tinkerpop.gremlin.structure.Vertex;
&nbsp;import org.junit.Assert;
&nbsp;import org.junit.Assume;
&nbsp;import org.junit.BeforeClass;
&nbsp;import org.junit.Test;
&nbsp;import org.slf4j.Logger;
&nbsp;import org.slf4j.LoggerFactory;
&nbsp;import org.umlg.sqlg.structure.SqlgGraph;
&nbsp;import org.umlg.sqlg.structure.topology.Topology;
&nbsp;import org.umlg.sqlg.test.BaseTest;
&nbsp;
&nbsp;import java.time.LocalDate;
&nbsp;import java.time.LocalDateTime;
&nbsp;import java.time.LocalTime;
&nbsp;import java.time.temporal.ChronoUnit;
&nbsp;import java.util.*;
&nbsp;
&nbsp;/**
&nbsp; * Date: 2015/10/07
&nbsp; * Time: 7:28 PM
&nbsp; */
<b class="fc">&nbsp;public class TestBulkWithin extends BaseTest {</b>
&nbsp;
<b class="fc">&nbsp;    private static final Logger LOGGER = LoggerFactory.getLogger(TestBulkWithin.class.getName());</b>
&nbsp;
&nbsp;    @BeforeClass
&nbsp;    public static void beforeClass() {
<b class="fc">&nbsp;        BaseTest.beforeClass();</b>
<b class="pc">&nbsp;        if (isPostgres()) {</b>
<b class="fc">&nbsp;            configuration.addProperty(&quot;distributed&quot;, true);</b>
&nbsp;        }
&nbsp;    }
&nbsp;
&nbsp;    @Test
&nbsp;    public void testBulkWithinStringSet() {
<b class="fc">&nbsp;        for (int i = 0; i &lt; 3; i++) {</b>
<b class="fc">&nbsp;            this.sqlgGraph.addVertex(T.label, &quot;A&quot;, &quot;name&quot;, &quot;a&quot; + i);</b>
&nbsp;        }
<b class="fc">&nbsp;        this.sqlgGraph.tx().commit();</b>
<b class="fc">&nbsp;        Set&lt;String&gt; valuesToSearch = Set.of(&quot;a0&quot;, &quot;a1&quot;, &quot;a2&quot;);</b>
<b class="fc">&nbsp;        List&lt;Vertex&gt; vertices = this.sqlgGraph.traversal().V().hasLabel(&quot;A&quot;)</b>
<b class="fc">&nbsp;                .has(&quot;name&quot;, P.within(valuesToSearch)).toList();</b>
<b class="fc">&nbsp;        Assert.assertEquals(3, vertices.size());</b>
&nbsp;    }
&nbsp;
&nbsp;    @Test
&nbsp;    public void testBulkWithinString() {
<b class="fc">&nbsp;        for (int i = 0; i &lt; 3; i++) {</b>
<b class="fc">&nbsp;            this.sqlgGraph.addVertex(T.label, &quot;A&quot;, &quot;name&quot;, &quot;a&quot; + i);</b>
&nbsp;        }
<b class="fc">&nbsp;        this.sqlgGraph.tx().commit();</b>
<b class="fc">&nbsp;        List&lt;Vertex&gt; vertices = this.sqlgGraph.traversal().V().hasLabel(&quot;A&quot;).has(&quot;name&quot;, P.within(&quot;a0&quot;, &quot;a1&quot;, &quot;a2&quot;)).toList();</b>
<b class="fc">&nbsp;        Assert.assertEquals(3, vertices.size());</b>
&nbsp;    }
&nbsp;
&nbsp;    @Test
&nbsp;    public void testBulkWithin_StringArray() {
<b class="fc">&nbsp;        Assume.assumeTrue(this.sqlgGraph.getSqlDialect().supportsStringArrayValues());</b>
<b class="fc">&nbsp;        String[] stringArray1 = new String[]{&quot;a&quot;, &quot;b&quot;, &quot;c&quot;};</b>
<b class="fc">&nbsp;        String[] stringArray2 = new String[]{&quot;d&quot;, &quot;e&quot;, &quot;f&quot;};</b>
<b class="fc">&nbsp;        String[] stringArray3 = new String[]{&quot;g&quot;, &quot;h&quot;, &quot;i&quot;};</b>
<b class="fc">&nbsp;        String[] stringArray4 = new String[]{&quot;j&quot;, &quot;k&quot;, &quot;l&quot;};</b>
<b class="fc">&nbsp;        Vertex v1 = this.sqlgGraph.addVertex(T.label, &quot;A&quot;, &quot;name&quot;, stringArray1);</b>
<b class="fc">&nbsp;        Vertex v2 = this.sqlgGraph.addVertex(T.label, &quot;A&quot;, &quot;name&quot;, stringArray2);</b>
<b class="fc">&nbsp;        Vertex v3 = this.sqlgGraph.addVertex(T.label, &quot;A&quot;, &quot;name&quot;, stringArray3);</b>
<b class="fc">&nbsp;        Vertex v4 = this.sqlgGraph.addVertex(T.label, &quot;A&quot;, &quot;name&quot;, stringArray4);</b>
<b class="fc">&nbsp;        this.sqlgGraph.tx().commit();</b>
<b class="fc">&nbsp;        List&lt;Vertex&gt; vertices = this.sqlgGraph.traversal().V().hasLabel(&quot;A&quot;).has(&quot;name&quot;, P.within(stringArray1, stringArray3, stringArray4)).toList();</b>
<b class="fc">&nbsp;        Assert.assertEquals(3, vertices.size());</b>
<b class="fc">&nbsp;        Assert.assertTrue(Arrays.asList(v1, v3, v4).containsAll(vertices));</b>
&nbsp;    }
&nbsp;
&nbsp;    @Test
&nbsp;    public void testBulkWithinBoolean() {
<b class="fc">&nbsp;        this.sqlgGraph.addVertex(T.label, &quot;A&quot;, &quot;name&quot;, false);</b>
<b class="fc">&nbsp;        this.sqlgGraph.addVertex(T.label, &quot;A&quot;, &quot;name&quot;, true);</b>
<b class="fc">&nbsp;        this.sqlgGraph.addVertex(T.label, &quot;A&quot;, &quot;name&quot;, true);</b>
<b class="fc">&nbsp;        this.sqlgGraph.addVertex(T.label, &quot;A&quot;, &quot;name&quot;, true);</b>
<b class="fc">&nbsp;        this.sqlgGraph.addVertex(T.label, &quot;A&quot;, &quot;name&quot;, true);</b>
<b class="fc">&nbsp;        this.sqlgGraph.addVertex(T.label, &quot;A&quot;, &quot;name&quot;, true);</b>
<b class="fc">&nbsp;        this.sqlgGraph.tx().commit();</b>
<b class="fc">&nbsp;        List&lt;Vertex&gt; vertices = this.sqlgGraph.traversal().V().hasLabel(&quot;A&quot;).has(&quot;name&quot;, P.within(true, true, true, true)).toList();</b>
<b class="fc">&nbsp;        Assert.assertEquals(5, vertices.size());</b>
&nbsp;    }
&nbsp;
&nbsp;    @Test
&nbsp;    public void testBulkWithin_booleanArray() {
<b class="fc">&nbsp;        Assume.assumeTrue(this.sqlgGraph.getSqlDialect().supportsBooleanArrayValues());</b>
<b class="fc">&nbsp;        boolean[] booleanArray1 = new boolean[]{true, false, true};</b>
<b class="fc">&nbsp;        boolean[] booleanArray2 = new boolean[]{false, false, false};</b>
<b class="fc">&nbsp;        boolean[] booleanArray3 = new boolean[]{true, false, false};</b>
<b class="fc">&nbsp;        boolean[] booleanArray4 = new boolean[]{false, false, true};</b>
<b class="fc">&nbsp;        Vertex v1 = this.sqlgGraph.addVertex(T.label, &quot;A&quot;, &quot;name&quot;, booleanArray1);</b>
<b class="fc">&nbsp;        Vertex v2 = this.sqlgGraph.addVertex(T.label, &quot;A&quot;, &quot;name&quot;, booleanArray2);</b>
<b class="fc">&nbsp;        Vertex v3 = this.sqlgGraph.addVertex(T.label, &quot;A&quot;, &quot;name&quot;, booleanArray3);</b>
<b class="fc">&nbsp;        Vertex v4 = this.sqlgGraph.addVertex(T.label, &quot;A&quot;, &quot;name&quot;, booleanArray4);</b>
<b class="fc">&nbsp;        this.sqlgGraph.tx().commit();</b>
<b class="fc">&nbsp;        List&lt;Vertex&gt; vertices = this.sqlgGraph.traversal().V().hasLabel(&quot;A&quot;).has(&quot;name&quot;, P.within(booleanArray1, booleanArray3, booleanArray4)).toList();</b>
<b class="fc">&nbsp;        Assert.assertEquals(3, vertices.size());</b>
<b class="fc">&nbsp;        Assert.assertTrue(Arrays.asList(v1, v3, v4).containsAll(vertices));</b>
&nbsp;    }
&nbsp;
&nbsp;    @Test
&nbsp;    public void testBulkWithin_BooleanArray() {
<b class="fc">&nbsp;        Assume.assumeTrue(this.sqlgGraph.getSqlDialect().supportsBooleanArrayValues());</b>
<b class="fc">&nbsp;        Boolean[] booleanArray1 = new Boolean[]{true, false, true};</b>
<b class="fc">&nbsp;        Boolean[] booleanArray2 = new Boolean[]{false, false, false};</b>
<b class="fc">&nbsp;        Boolean[] booleanArray3 = new Boolean[]{true, false, false};</b>
<b class="fc">&nbsp;        Boolean[] booleanArray4 = new Boolean[]{false, false, true};</b>
<b class="fc">&nbsp;        Vertex v1 = this.sqlgGraph.addVertex(T.label, &quot;A&quot;, &quot;name&quot;, booleanArray1);</b>
<b class="fc">&nbsp;        Vertex v2 = this.sqlgGraph.addVertex(T.label, &quot;A&quot;, &quot;name&quot;, booleanArray2);</b>
<b class="fc">&nbsp;        Vertex v3 = this.sqlgGraph.addVertex(T.label, &quot;A&quot;, &quot;name&quot;, booleanArray3);</b>
<b class="fc">&nbsp;        Vertex v4 = this.sqlgGraph.addVertex(T.label, &quot;A&quot;, &quot;name&quot;, booleanArray4);</b>
<b class="fc">&nbsp;        this.sqlgGraph.tx().commit();</b>
<b class="fc">&nbsp;        List&lt;Vertex&gt; vertices = this.sqlgGraph.traversal().V().hasLabel(&quot;A&quot;).has(&quot;name&quot;, P.within(booleanArray1, booleanArray3, booleanArray4)).toList();</b>
<b class="fc">&nbsp;        Assert.assertEquals(3, vertices.size());</b>
<b class="fc">&nbsp;        Assert.assertTrue(Arrays.asList(v1, v3, v4).containsAll(vertices));</b>
&nbsp;    }
&nbsp;
&nbsp;    @Test
&nbsp;    public void testBulkWithinByte() {
<b class="fc">&nbsp;        Assume.assumeTrue(this.sqlgGraph.getSqlDialect().supportsByteValues());</b>
<b class="nc">&nbsp;        this.sqlgGraph.addVertex(T.label, &quot;A&quot;, &quot;name&quot;, (byte) 1);</b>
<b class="nc">&nbsp;        this.sqlgGraph.addVertex(T.label, &quot;A&quot;, &quot;name&quot;, (byte) 2);</b>
<b class="nc">&nbsp;        this.sqlgGraph.addVertex(T.label, &quot;A&quot;, &quot;name&quot;, (byte) 3);</b>
<b class="nc">&nbsp;        this.sqlgGraph.tx().commit();</b>
<b class="nc">&nbsp;        List&lt;Vertex&gt; vertices = this.sqlgGraph.traversal().V().hasLabel(&quot;A&quot;).has(&quot;name&quot;, P.within((byte) 1, (byte) 2, (byte) 3)).toList();</b>
<b class="nc">&nbsp;        Assert.assertEquals(3, vertices.size());</b>
&nbsp;    }
&nbsp;
&nbsp;    @Test
&nbsp;    public void testBulkWithinByteArray() {
<b class="fc">&nbsp;        Assume.assumeTrue(this.sqlgGraph.getSqlDialect().supportsByteArrayValues());</b>
<b class="fc">&nbsp;        Byte[] byteArray1 = new Byte[]{(byte) 1, (byte) 2};</b>
<b class="fc">&nbsp;        Byte[] byteArray2 = new Byte[]{(byte) 3, (byte) 4};</b>
<b class="fc">&nbsp;        Byte[] byteArray3 = new Byte[]{(byte) 5, (byte) 6};</b>
<b class="fc">&nbsp;        Byte[] byteArray4 = new Byte[]{(byte) 7, (byte) 8};</b>
<b class="fc">&nbsp;        Vertex v1 = this.sqlgGraph.addVertex(T.label, &quot;A&quot;, &quot;name&quot;, byteArray1);</b>
<b class="fc">&nbsp;        Vertex v2 = this.sqlgGraph.addVertex(T.label, &quot;A&quot;, &quot;name&quot;, byteArray2);</b>
<b class="fc">&nbsp;        Vertex v3 = this.sqlgGraph.addVertex(T.label, &quot;A&quot;, &quot;name&quot;, byteArray3);</b>
<b class="fc">&nbsp;        Vertex v4 = this.sqlgGraph.addVertex(T.label, &quot;A&quot;, &quot;name&quot;, byteArray4);</b>
<b class="fc">&nbsp;        this.sqlgGraph.tx().commit();</b>
<b class="fc">&nbsp;        List&lt;Vertex&gt; vertices = this.sqlgGraph.traversal().V().hasLabel(&quot;A&quot;).has(&quot;name&quot;, P.within(byteArray1, byteArray3, byteArray4)).toList();</b>
<b class="fc">&nbsp;        Assert.assertEquals(3, vertices.size());</b>
<b class="fc">&nbsp;        Assert.assertTrue(vertices.containsAll(Arrays.asList(v1, v3, v4)));</b>
&nbsp;    }
&nbsp;
&nbsp;    @Test
&nbsp;    public void testBulkWithin_byteArray() {
<b class="fc">&nbsp;        Assume.assumeTrue(this.sqlgGraph.getSqlDialect().supportsByteArrayValues());</b>
<b class="fc">&nbsp;        byte[] byteArray1 = new byte[]{(byte) 1, (byte) 2};</b>
<b class="fc">&nbsp;        byte[] byteArray2 = new byte[]{(byte) 3, (byte) 4};</b>
<b class="fc">&nbsp;        byte[] byteArray3 = new byte[]{(byte) 5, (byte) 6};</b>
<b class="fc">&nbsp;        byte[] byteArray4 = new byte[]{(byte) 7, (byte) 8};</b>
<b class="fc">&nbsp;        Vertex v1 = this.sqlgGraph.addVertex(T.label, &quot;A&quot;, &quot;name&quot;, byteArray1);</b>
<b class="fc">&nbsp;        Vertex v2 = this.sqlgGraph.addVertex(T.label, &quot;A&quot;, &quot;name&quot;, byteArray2);</b>
<b class="fc">&nbsp;        Vertex v3 = this.sqlgGraph.addVertex(T.label, &quot;A&quot;, &quot;name&quot;, byteArray3);</b>
<b class="fc">&nbsp;        Vertex v4 = this.sqlgGraph.addVertex(T.label, &quot;A&quot;, &quot;name&quot;, byteArray4);</b>
<b class="fc">&nbsp;        this.sqlgGraph.tx().commit();</b>
<b class="fc">&nbsp;        List&lt;Vertex&gt; vertices = this.sqlgGraph.traversal().V().hasLabel(&quot;A&quot;).has(&quot;name&quot;, P.within(byteArray1, byteArray3, byteArray4)).toList();</b>
<b class="fc">&nbsp;        Assert.assertEquals(3, vertices.size());</b>
<b class="fc">&nbsp;        Assert.assertTrue(vertices.containsAll(Arrays.asList(v1, v3, v4)));</b>
&nbsp;    }
&nbsp;
&nbsp;    @Test
&nbsp;    public void testBulkWithinShort() {
<b class="fc">&nbsp;        this.sqlgGraph.addVertex(T.label, &quot;A&quot;, &quot;name&quot;, (short) 1);</b>
<b class="fc">&nbsp;        this.sqlgGraph.addVertex(T.label, &quot;A&quot;, &quot;name&quot;, (short) 2);</b>
<b class="fc">&nbsp;        this.sqlgGraph.addVertex(T.label, &quot;A&quot;, &quot;name&quot;, (short) 3);</b>
<b class="fc">&nbsp;        this.sqlgGraph.tx().commit();</b>
<b class="fc">&nbsp;        List&lt;Vertex&gt; vertices = this.sqlgGraph.traversal().V().hasLabel(&quot;A&quot;).has(&quot;name&quot;, P.within((short) 1, (short) 2, (short) 3)).toList();</b>
<b class="fc">&nbsp;        Assert.assertEquals(3, vertices.size());</b>
&nbsp;    }
&nbsp;
&nbsp;    @Test
&nbsp;    public void testBulkWithin_shortArray() {
<b class="fc">&nbsp;        Assume.assumeTrue(this.sqlgGraph.getSqlDialect().supportsShortArrayValues());</b>
<b class="fc">&nbsp;        short[] shortArray1 = new short[]{(short) 1, (short) 2, (short) 3};</b>
<b class="fc">&nbsp;        short[] shortArray2 = new short[]{(short) 4, (short) 5, (short) 6};</b>
<b class="fc">&nbsp;        short[] shortArray3 = new short[]{(short) 7, (short) 8, (short) 9};</b>
<b class="fc">&nbsp;        short[] shortArray4 = new short[]{(short) 10, (short) 11, (short) 12};</b>
<b class="fc">&nbsp;        Vertex v1 = this.sqlgGraph.addVertex(T.label, &quot;A&quot;, &quot;name&quot;, shortArray1);</b>
<b class="fc">&nbsp;        Vertex v2 = this.sqlgGraph.addVertex(T.label, &quot;A&quot;, &quot;name&quot;, shortArray2);</b>
<b class="fc">&nbsp;        Vertex v3 = this.sqlgGraph.addVertex(T.label, &quot;A&quot;, &quot;name&quot;, shortArray3);</b>
<b class="fc">&nbsp;        Vertex v4 = this.sqlgGraph.addVertex(T.label, &quot;A&quot;, &quot;name&quot;, shortArray4);</b>
<b class="fc">&nbsp;        this.sqlgGraph.tx().commit();</b>
<b class="fc">&nbsp;        List&lt;Vertex&gt; vertices = this.sqlgGraph.traversal().V().hasLabel(&quot;A&quot;).has(&quot;name&quot;, P.within(shortArray1, shortArray3, shortArray4)).toList();</b>
<b class="fc">&nbsp;        Assert.assertEquals(3, vertices.size());</b>
<b class="fc">&nbsp;        Assert.assertTrue(Arrays.asList(v1, v3, v4).containsAll(vertices));</b>
&nbsp;    }
&nbsp;
&nbsp;    @Test
&nbsp;    public void testBulkWithin_ShortArray() {
<b class="fc">&nbsp;        Assume.assumeTrue(this.sqlgGraph.getSqlDialect().supportsShortArrayValues());</b>
<b class="fc">&nbsp;        Short[] shortArray1 = new Short[]{(short) 1, (short) 2, (short) 3};</b>
<b class="fc">&nbsp;        Short[] shortArray2 = new Short[]{(short) 4, (short) 5, (short) 6};</b>
<b class="fc">&nbsp;        Short[] shortArray3 = new Short[]{(short) 7, (short) 8, (short) 9};</b>
<b class="fc">&nbsp;        Short[] shortArray4 = new Short[]{(short) 10, (short) 11, (short) 12};</b>
<b class="fc">&nbsp;        Vertex v1 = this.sqlgGraph.addVertex(T.label, &quot;A&quot;, &quot;name&quot;, shortArray1);</b>
<b class="fc">&nbsp;        Vertex v2 = this.sqlgGraph.addVertex(T.label, &quot;A&quot;, &quot;name&quot;, shortArray2);</b>
<b class="fc">&nbsp;        Vertex v3 = this.sqlgGraph.addVertex(T.label, &quot;A&quot;, &quot;name&quot;, shortArray3);</b>
<b class="fc">&nbsp;        Vertex v4 = this.sqlgGraph.addVertex(T.label, &quot;A&quot;, &quot;name&quot;, shortArray4);</b>
<b class="fc">&nbsp;        this.sqlgGraph.tx().commit();</b>
<b class="fc">&nbsp;        List&lt;Vertex&gt; vertices = this.sqlgGraph.traversal().V().hasLabel(&quot;A&quot;).has(&quot;name&quot;, P.within(shortArray1, shortArray3, shortArray4)).toList();</b>
<b class="fc">&nbsp;        Assert.assertEquals(3, vertices.size());</b>
<b class="fc">&nbsp;        Assert.assertTrue(Arrays.asList(v1, v3, v4).containsAll(vertices));</b>
&nbsp;    }
&nbsp;
&nbsp;    @Test
&nbsp;    public void testBulkWithinInteger() {
<b class="fc">&nbsp;        this.sqlgGraph.addVertex(T.label, &quot;A&quot;, &quot;name&quot;, 1);</b>
<b class="fc">&nbsp;        this.sqlgGraph.addVertex(T.label, &quot;A&quot;, &quot;name&quot;, 2);</b>
<b class="fc">&nbsp;        this.sqlgGraph.addVertex(T.label, &quot;A&quot;, &quot;name&quot;, 3);</b>
<b class="fc">&nbsp;        this.sqlgGraph.tx().commit();</b>
<b class="fc">&nbsp;        List&lt;Vertex&gt; vertices = this.sqlgGraph.traversal().V().hasLabel(&quot;A&quot;).has(&quot;name&quot;, P.within(1, 2, 3)).toList();</b>
<b class="fc">&nbsp;        Assert.assertEquals(3, vertices.size());</b>
&nbsp;    }
&nbsp;
&nbsp;
&nbsp;    @Test
&nbsp;    public void testBulkWithin_intArray() {
<b class="fc">&nbsp;        Assume.assumeTrue(this.sqlgGraph.getSqlDialect().supportsIntegerArrayValues());</b>
<b class="fc">&nbsp;        int[] intArray1 = new int[]{1, 2, 3};</b>
<b class="fc">&nbsp;        int[] intArray2 = new int[]{4, 5, 6};</b>
<b class="fc">&nbsp;        int[] intArray3 = new int[]{7, 8, 9};</b>
<b class="fc">&nbsp;        int[] intArray4 = new int[]{10, 11, 12};</b>
<b class="fc">&nbsp;        Vertex v1 = this.sqlgGraph.addVertex(T.label, &quot;A&quot;, &quot;name&quot;, intArray1);</b>
<b class="fc">&nbsp;        Vertex v2 = this.sqlgGraph.addVertex(T.label, &quot;A&quot;, &quot;name&quot;, intArray2);</b>
<b class="fc">&nbsp;        Vertex v3 = this.sqlgGraph.addVertex(T.label, &quot;A&quot;, &quot;name&quot;, intArray3);</b>
<b class="fc">&nbsp;        Vertex v4 = this.sqlgGraph.addVertex(T.label, &quot;A&quot;, &quot;name&quot;, intArray4);</b>
<b class="fc">&nbsp;        this.sqlgGraph.tx().commit();</b>
<b class="fc">&nbsp;        List&lt;Vertex&gt; vertices = this.sqlgGraph.traversal().V().hasLabel(&quot;A&quot;).has(&quot;name&quot;, P.within(intArray1, intArray3, intArray4)).toList();</b>
<b class="fc">&nbsp;        Assert.assertEquals(3, vertices.size());</b>
<b class="fc">&nbsp;        Assert.assertTrue(Arrays.asList(v1, v3, v4).containsAll(vertices));</b>
&nbsp;    }
&nbsp;
&nbsp;    @Test
&nbsp;    public void testBulkWithin_IntegerArray() {
<b class="fc">&nbsp;        Assume.assumeTrue(this.sqlgGraph.getSqlDialect().supportsIntegerArrayValues());</b>
<b class="fc">&nbsp;        Integer[] intArray1 = new Integer[]{1, 2, 3};</b>
<b class="fc">&nbsp;        Integer[] intArray2 = new Integer[]{4, 5, 6};</b>
<b class="fc">&nbsp;        Integer[] intArray3 = new Integer[]{7, 8, 9};</b>
<b class="fc">&nbsp;        Integer[] intArray4 = new Integer[]{10, 11, 12};</b>
<b class="fc">&nbsp;        Vertex v1 = this.sqlgGraph.addVertex(T.label, &quot;A&quot;, &quot;name&quot;, intArray1);</b>
<b class="fc">&nbsp;        Vertex v2 = this.sqlgGraph.addVertex(T.label, &quot;A&quot;, &quot;name&quot;, intArray2);</b>
<b class="fc">&nbsp;        Vertex v3 = this.sqlgGraph.addVertex(T.label, &quot;A&quot;, &quot;name&quot;, intArray3);</b>
<b class="fc">&nbsp;        Vertex v4 = this.sqlgGraph.addVertex(T.label, &quot;A&quot;, &quot;name&quot;, intArray4);</b>
<b class="fc">&nbsp;        this.sqlgGraph.tx().commit();</b>
<b class="fc">&nbsp;        List&lt;Vertex&gt; vertices = this.sqlgGraph.traversal().V().hasLabel(&quot;A&quot;).has(&quot;name&quot;, P.within(intArray1, intArray3, intArray4)).toList();</b>
<b class="fc">&nbsp;        Assert.assertEquals(3, vertices.size());</b>
<b class="fc">&nbsp;        Assert.assertTrue(Arrays.asList(v1, v3, v4).containsAll(vertices));</b>
&nbsp;    }
&nbsp;
&nbsp;    @Test
&nbsp;    public void testBulkWithinLong() {
<b class="fc">&nbsp;        this.sqlgGraph.addVertex(T.label, &quot;A&quot;, &quot;name&quot;, 1L);</b>
<b class="fc">&nbsp;        this.sqlgGraph.addVertex(T.label, &quot;A&quot;, &quot;name&quot;, 2L);</b>
<b class="fc">&nbsp;        this.sqlgGraph.addVertex(T.label, &quot;A&quot;, &quot;name&quot;, 3L);</b>
<b class="fc">&nbsp;        this.sqlgGraph.tx().commit();</b>
<b class="fc">&nbsp;        List&lt;Vertex&gt; vertices = this.sqlgGraph.traversal().V().hasLabel(&quot;A&quot;).has(&quot;name&quot;, P.within(1L, 2L, 3L)).toList();</b>
<b class="fc">&nbsp;        Assert.assertEquals(3, vertices.size());</b>
&nbsp;    }
&nbsp;
&nbsp;    @Test
&nbsp;    public void testBulkWithin_longArray() {
<b class="fc">&nbsp;        Assume.assumeTrue(this.sqlgGraph.getSqlDialect().supportsLongArrayValues());</b>
<b class="fc">&nbsp;        long[] longArray1 = new long[]{1L, 2L, 3L};</b>
<b class="fc">&nbsp;        long[] longArray2 = new long[]{4L, 5L, 6L};</b>
<b class="fc">&nbsp;        long[] longArray3 = new long[]{7L, 8L, 9L};</b>
<b class="fc">&nbsp;        long[] longArray4 = new long[]{10L, 11L, 12L};</b>
<b class="fc">&nbsp;        Vertex v1 = this.sqlgGraph.addVertex(T.label, &quot;A&quot;, &quot;name&quot;, longArray1);</b>
<b class="fc">&nbsp;        Vertex v2 = this.sqlgGraph.addVertex(T.label, &quot;A&quot;, &quot;name&quot;, longArray2);</b>
<b class="fc">&nbsp;        Vertex v3 = this.sqlgGraph.addVertex(T.label, &quot;A&quot;, &quot;name&quot;, longArray3);</b>
<b class="fc">&nbsp;        Vertex v4 = this.sqlgGraph.addVertex(T.label, &quot;A&quot;, &quot;name&quot;, longArray4);</b>
<b class="fc">&nbsp;        this.sqlgGraph.tx().commit();</b>
<b class="fc">&nbsp;        List&lt;Vertex&gt; vertices = this.sqlgGraph.traversal().V().hasLabel(&quot;A&quot;).has(&quot;name&quot;, P.within(longArray1, longArray3, longArray4)).toList();</b>
<b class="fc">&nbsp;        Assert.assertEquals(3, vertices.size());</b>
<b class="fc">&nbsp;        Assert.assertTrue(Arrays.asList(v1, v3, v4).containsAll(vertices));</b>
&nbsp;    }
&nbsp;
&nbsp;    @Test
&nbsp;    public void testBulkWithin_LongArray() {
<b class="fc">&nbsp;        Assume.assumeTrue(this.sqlgGraph.getSqlDialect().supportsLongArrayValues());</b>
<b class="fc">&nbsp;        Long[] longArray1 = new Long[]{1L, 2L, 3L};</b>
<b class="fc">&nbsp;        Long[] longArray2 = new Long[]{4L, 5L, 6L};</b>
<b class="fc">&nbsp;        Long[] longArray3 = new Long[]{7L, 8L, 9L};</b>
<b class="fc">&nbsp;        Long[] longArray4 = new Long[]{10L, 11L, 12L};</b>
<b class="fc">&nbsp;        Vertex v1 = this.sqlgGraph.addVertex(T.label, &quot;A&quot;, &quot;name&quot;, longArray1);</b>
<b class="fc">&nbsp;        Vertex v2 = this.sqlgGraph.addVertex(T.label, &quot;A&quot;, &quot;name&quot;, longArray2);</b>
<b class="fc">&nbsp;        Vertex v3 = this.sqlgGraph.addVertex(T.label, &quot;A&quot;, &quot;name&quot;, longArray3);</b>
<b class="fc">&nbsp;        Vertex v4 = this.sqlgGraph.addVertex(T.label, &quot;A&quot;, &quot;name&quot;, longArray4);</b>
<b class="fc">&nbsp;        this.sqlgGraph.tx().commit();</b>
<b class="fc">&nbsp;        List&lt;Vertex&gt; vertices = this.sqlgGraph.traversal().V().hasLabel(&quot;A&quot;).has(&quot;name&quot;, P.within(longArray1, longArray3, longArray4)).toList();</b>
<b class="fc">&nbsp;        Assert.assertEquals(3, vertices.size());</b>
<b class="fc">&nbsp;        Assert.assertTrue(Arrays.asList(v1, v3, v4).containsAll(vertices));</b>
&nbsp;    }
&nbsp;
&nbsp;    @Test
&nbsp;    public void testBulkWithinFloat() {
<b class="fc">&nbsp;        Assume.assumeTrue(this.sqlgGraph.getSqlDialect().supportsFloatValues());</b>
<b class="fc">&nbsp;        this.sqlgGraph.addVertex(T.label, &quot;A&quot;, &quot;name&quot;, 1.1F);</b>
<b class="fc">&nbsp;        this.sqlgGraph.addVertex(T.label, &quot;A&quot;, &quot;name&quot;, 2.2F);</b>
<b class="fc">&nbsp;        this.sqlgGraph.addVertex(T.label, &quot;A&quot;, &quot;name&quot;, 3.3F);</b>
<b class="fc">&nbsp;        this.sqlgGraph.tx().commit();</b>
<b class="fc">&nbsp;        List&lt;Vertex&gt; vertices = this.sqlgGraph.traversal().V().hasLabel(&quot;A&quot;).has(&quot;name&quot;, P.within(1.1F, 2.2F, 3.3F)).toList();</b>
<b class="fc">&nbsp;        Assert.assertEquals(3, vertices.size());</b>
&nbsp;    }
&nbsp;
&nbsp;    @Test
&nbsp;    public void testBulkWithin_floatArray() {
<b class="fc">&nbsp;        Assume.assumeTrue(this.sqlgGraph.getSqlDialect().supportsFloatArrayValues());</b>
<b class="fc">&nbsp;        float[] floatArray1 = new float[]{1F, 2F, 3F};</b>
<b class="fc">&nbsp;        float[] floatArray2 = new float[]{4F, 5F, 6F};</b>
<b class="fc">&nbsp;        float[] floatArray3 = new float[]{7F, 8F, 9F};</b>
<b class="fc">&nbsp;        float[] floatArray4 = new float[]{10F, 11F, 12F};</b>
<b class="fc">&nbsp;        Vertex v1 = this.sqlgGraph.addVertex(T.label, &quot;A&quot;, &quot;name&quot;, floatArray1);</b>
<b class="fc">&nbsp;        Vertex v2 = this.sqlgGraph.addVertex(T.label, &quot;A&quot;, &quot;name&quot;, floatArray2);</b>
<b class="fc">&nbsp;        Vertex v3 = this.sqlgGraph.addVertex(T.label, &quot;A&quot;, &quot;name&quot;, floatArray3);</b>
<b class="fc">&nbsp;        Vertex v4 = this.sqlgGraph.addVertex(T.label, &quot;A&quot;, &quot;name&quot;, floatArray4);</b>
<b class="fc">&nbsp;        this.sqlgGraph.tx().commit();</b>
<b class="fc">&nbsp;        List&lt;Vertex&gt; vertices = this.sqlgGraph.traversal().V().hasLabel(&quot;A&quot;).has(&quot;name&quot;, P.within(floatArray1, floatArray3, floatArray4)).toList();</b>
<b class="fc">&nbsp;        Assert.assertEquals(3, vertices.size());</b>
<b class="fc">&nbsp;        Assert.assertTrue(Arrays.asList(v1, v3, v4).containsAll(vertices));</b>
&nbsp;    }
&nbsp;
&nbsp;    @Test
&nbsp;    public void testBulkWithin_FloatArray() {
<b class="fc">&nbsp;        Assume.assumeTrue(this.sqlgGraph.getSqlDialect().supportsFloatArrayValues());</b>
<b class="fc">&nbsp;        Float[] floatArray1 = new Float[]{1F, 2F, 3F};</b>
<b class="fc">&nbsp;        Float[] floatArray2 = new Float[]{4F, 5F, 6F};</b>
<b class="fc">&nbsp;        Float[] floatArray3 = new Float[]{7F, 8F, 9F};</b>
<b class="fc">&nbsp;        Float[] floatArray4 = new Float[]{10F, 11F, 12F};</b>
<b class="fc">&nbsp;        Vertex v1 = this.sqlgGraph.addVertex(T.label, &quot;A&quot;, &quot;name&quot;, floatArray1);</b>
<b class="fc">&nbsp;        Vertex v2 = this.sqlgGraph.addVertex(T.label, &quot;A&quot;, &quot;name&quot;, floatArray2);</b>
<b class="fc">&nbsp;        Vertex v3 = this.sqlgGraph.addVertex(T.label, &quot;A&quot;, &quot;name&quot;, floatArray3);</b>
<b class="fc">&nbsp;        Vertex v4 = this.sqlgGraph.addVertex(T.label, &quot;A&quot;, &quot;name&quot;, floatArray4);</b>
<b class="fc">&nbsp;        this.sqlgGraph.tx().commit();</b>
<b class="fc">&nbsp;        List&lt;Vertex&gt; vertices = this.sqlgGraph.traversal().V().hasLabel(&quot;A&quot;).has(&quot;name&quot;, P.within(floatArray1, floatArray3, floatArray4)).toList();</b>
<b class="fc">&nbsp;        Assert.assertEquals(3, vertices.size());</b>
<b class="fc">&nbsp;        Assert.assertTrue(Arrays.asList(v1, v3, v4).containsAll(vertices));</b>
&nbsp;    }
&nbsp;
&nbsp;    @Test
&nbsp;    public void testBulkWithinDouble() {
<b class="fc">&nbsp;        this.sqlgGraph.addVertex(T.label, &quot;A&quot;, &quot;name&quot;, 1.1D);</b>
<b class="fc">&nbsp;        this.sqlgGraph.addVertex(T.label, &quot;A&quot;, &quot;name&quot;, 2.2D);</b>
<b class="fc">&nbsp;        this.sqlgGraph.addVertex(T.label, &quot;A&quot;, &quot;name&quot;, 3.3D);</b>
<b class="fc">&nbsp;        this.sqlgGraph.tx().commit();</b>
<b class="fc">&nbsp;        List&lt;Vertex&gt; vertices = this.sqlgGraph.traversal().V().hasLabel(&quot;A&quot;).has(&quot;name&quot;, P.within(1.1D, 2.2D, 3.3D)).toList();</b>
<b class="fc">&nbsp;        Assert.assertEquals(3, vertices.size());</b>
&nbsp;    }
&nbsp;
&nbsp;    @Test
&nbsp;    public void testBulkWithin_doubleArray() {
<b class="fc">&nbsp;        Assume.assumeTrue(this.sqlgGraph.getSqlDialect().supportsDoubleArrayValues());</b>
<b class="fc">&nbsp;        double[] doubleArray1 = new double[]{1.1D, 2.2D, 3.3D};</b>
<b class="fc">&nbsp;        double[] doubleArray2 = new double[]{4.4D, 5.5D, 6.6D};</b>
<b class="fc">&nbsp;        double[] doubleArray3 = new double[]{7.7D, 8.8D, 9.9D};</b>
<b class="fc">&nbsp;        double[] doubleArray4 = new double[]{10.10D, 11.11D, 12.12D};</b>
<b class="fc">&nbsp;        Vertex v1 = this.sqlgGraph.addVertex(T.label, &quot;A&quot;, &quot;name&quot;, doubleArray1);</b>
<b class="fc">&nbsp;        Vertex v2 = this.sqlgGraph.addVertex(T.label, &quot;A&quot;, &quot;name&quot;, doubleArray2);</b>
<b class="fc">&nbsp;        Vertex v3 = this.sqlgGraph.addVertex(T.label, &quot;A&quot;, &quot;name&quot;, doubleArray3);</b>
<b class="fc">&nbsp;        Vertex v4 = this.sqlgGraph.addVertex(T.label, &quot;A&quot;, &quot;name&quot;, doubleArray4);</b>
<b class="fc">&nbsp;        this.sqlgGraph.tx().commit();</b>
<b class="fc">&nbsp;        List&lt;Vertex&gt; vertices = this.sqlgGraph.traversal().V().hasLabel(&quot;A&quot;).has(&quot;name&quot;, P.within(doubleArray1, doubleArray3, doubleArray4)).toList();</b>
<b class="fc">&nbsp;        Assert.assertEquals(3, vertices.size());</b>
<b class="fc">&nbsp;        Assert.assertTrue(Arrays.asList(v1, v3, v4).containsAll(vertices));</b>
&nbsp;    }
&nbsp;
&nbsp;    @Test
&nbsp;    public void testBulkWithin_DoubleArray() {
<b class="fc">&nbsp;        Assume.assumeTrue(this.sqlgGraph.getSqlDialect().supportsDoubleArrayValues());</b>
<b class="fc">&nbsp;        Double[] doubleArray1 = new Double[]{1.1D, 2.2D, 3.3D};</b>
<b class="fc">&nbsp;        Double[] doubleArray2 = new Double[]{4.4D, 5.5D, 6.6D};</b>
<b class="fc">&nbsp;        Double[] doubleArray3 = new Double[]{7.7D, 8.8D, 9.9D};</b>
<b class="fc">&nbsp;        Double[] doubleArray4 = new Double[]{10.10D, 11.11D, 12.12D};</b>
<b class="fc">&nbsp;        Vertex v1 = this.sqlgGraph.addVertex(T.label, &quot;A&quot;, &quot;name&quot;, doubleArray1);</b>
<b class="fc">&nbsp;        Vertex v2 = this.sqlgGraph.addVertex(T.label, &quot;A&quot;, &quot;name&quot;, doubleArray2);</b>
<b class="fc">&nbsp;        Vertex v3 = this.sqlgGraph.addVertex(T.label, &quot;A&quot;, &quot;name&quot;, doubleArray3);</b>
<b class="fc">&nbsp;        Vertex v4 = this.sqlgGraph.addVertex(T.label, &quot;A&quot;, &quot;name&quot;, doubleArray4);</b>
<b class="fc">&nbsp;        this.sqlgGraph.tx().commit();</b>
<b class="fc">&nbsp;        List&lt;Vertex&gt; vertices = this.sqlgGraph.traversal().V().hasLabel(&quot;A&quot;).has(&quot;name&quot;, P.within(doubleArray1, doubleArray3, doubleArray4)).toList();</b>
<b class="fc">&nbsp;        Assert.assertEquals(3, vertices.size());</b>
<b class="fc">&nbsp;        Assert.assertTrue(Arrays.asList(v1, v3, v4).containsAll(vertices));</b>
&nbsp;    }
&nbsp;
&nbsp;    @Test
&nbsp;    public void testBulkWithinLocalDate() {
<b class="fc">&nbsp;        this.sqlgGraph.addVertex(T.label, &quot;A&quot;, &quot;name&quot;, LocalDate.now());</b>
<b class="fc">&nbsp;        this.sqlgGraph.addVertex(T.label, &quot;A&quot;, &quot;name&quot;, LocalDate.now().minusDays(1));</b>
<b class="fc">&nbsp;        this.sqlgGraph.addVertex(T.label, &quot;A&quot;, &quot;name&quot;, LocalDate.now().minusDays(2));</b>
<b class="fc">&nbsp;        this.sqlgGraph.tx().commit();</b>
<b class="fc">&nbsp;        List&lt;Vertex&gt; vertices = this.sqlgGraph.traversal().V().hasLabel(&quot;A&quot;).has(&quot;name&quot;, P.within(LocalDate.now(), LocalDate.now().minusDays(1), LocalDate.now().minusDays(2))).toList();</b>
<b class="fc">&nbsp;        Assert.assertEquals(3, vertices.size());</b>
&nbsp;    }
&nbsp;
&nbsp;    @Test
&nbsp;    public void testBulkWithin_LocalDateArray() {
<b class="fc">&nbsp;        Assume.assumeTrue(this.sqlgGraph.getSqlDialect().supportsLocalDateArrayValues());</b>
<b class="fc">&nbsp;        LocalDate[] localDateArray1 = new LocalDate[]{LocalDate.now().minusDays(1), LocalDate.now().minusDays(2), LocalDate.now().minusDays(3)};</b>
<b class="fc">&nbsp;        LocalDate[] localDateArray2 = new LocalDate[]{LocalDate.now().minusDays(4), LocalDate.now().minusDays(5), LocalDate.now().minusDays(6)};</b>
<b class="fc">&nbsp;        LocalDate[] localDateArray3 = new LocalDate[]{LocalDate.now().minusDays(7), LocalDate.now().minusDays(8), LocalDate.now().minusDays(9)};</b>
<b class="fc">&nbsp;        LocalDate[] localDateArray4 = new LocalDate[]{LocalDate.now().minusDays(10), LocalDate.now().minusDays(11), LocalDate.now().minusDays(12)};</b>
<b class="fc">&nbsp;        Vertex v1 = this.sqlgGraph.addVertex(T.label, &quot;A&quot;, &quot;name&quot;, localDateArray1);</b>
<b class="fc">&nbsp;        Vertex v2 = this.sqlgGraph.addVertex(T.label, &quot;A&quot;, &quot;name&quot;, localDateArray2);</b>
<b class="fc">&nbsp;        Vertex v3 = this.sqlgGraph.addVertex(T.label, &quot;A&quot;, &quot;name&quot;, localDateArray3);</b>
<b class="fc">&nbsp;        Vertex v4 = this.sqlgGraph.addVertex(T.label, &quot;A&quot;, &quot;name&quot;, localDateArray4);</b>
<b class="fc">&nbsp;        this.sqlgGraph.tx().commit();</b>
<b class="fc">&nbsp;        List&lt;Vertex&gt; vertices = this.sqlgGraph.traversal().V().hasLabel(&quot;A&quot;).has(&quot;name&quot;, P.within(localDateArray1, localDateArray3, localDateArray4)).toList();</b>
<b class="fc">&nbsp;        Assert.assertEquals(3, vertices.size());</b>
<b class="fc">&nbsp;        Assert.assertTrue(Arrays.asList(v1, v3, v4).containsAll(vertices));</b>
&nbsp;    }
&nbsp;
&nbsp;    @Test
&nbsp;    public void testBulkWithinLocalDateTime() {
<b class="fc">&nbsp;        LocalDateTime localDateTime1 = LocalDateTime.now();</b>
<b class="fc">&nbsp;        LocalDateTime localDateTime2 = LocalDateTime.now().minusDays(1);</b>
<b class="fc">&nbsp;        LocalDateTime localDateTime3 = LocalDateTime.now().minusDays(2);</b>
<b class="fc">&nbsp;        localDateTime1 = localDateTime1.truncatedTo(ChronoUnit.MILLIS);</b>
<b class="fc">&nbsp;        localDateTime2 = localDateTime2.truncatedTo(ChronoUnit.MILLIS);</b>
<b class="fc">&nbsp;        localDateTime3 = localDateTime3.truncatedTo(ChronoUnit.MILLIS);</b>
<b class="fc">&nbsp;        this.sqlgGraph.addVertex(T.label, &quot;A&quot;, &quot;name&quot;, localDateTime1);</b>
<b class="fc">&nbsp;        this.sqlgGraph.addVertex(T.label, &quot;A&quot;, &quot;name&quot;, localDateTime2);</b>
<b class="fc">&nbsp;        this.sqlgGraph.addVertex(T.label, &quot;A&quot;, &quot;name&quot;, localDateTime3);</b>
<b class="fc">&nbsp;        this.sqlgGraph.tx().commit();</b>
<b class="fc">&nbsp;        List&lt;Vertex&gt; vertices = this.sqlgGraph.traversal().V().hasLabel(&quot;A&quot;).has(&quot;name&quot;, P.within(localDateTime1, localDateTime2, localDateTime3)).toList();</b>
<b class="fc">&nbsp;        Assert.assertEquals(3, vertices.size());</b>
&nbsp;    }
&nbsp;
&nbsp;    //Hsqldb fails, looks like Hsqldb bug
&nbsp;    //TODO https://sourceforge.net/p/hsqldb/bugs/1495/
&nbsp;    @Test
&nbsp;    public void testBulkWithin_LocalDateTimeArray() {
<b class="pc">&nbsp;        Assume.assumeFalse(isHsqldb() || isH2());</b>
<b class="fc">&nbsp;        Assume.assumeTrue(this.sqlgGraph.getSqlDialect().supportsLocalDateTimeArrayValues());</b>
<b class="fc">&nbsp;        LocalDateTime[] localDateTimeArray1 = new LocalDateTime[]{LocalDateTime.now().minusDays(1), LocalDateTime.now().minusDays(2), LocalDateTime.now().minusDays(3)};</b>
<b class="fc">&nbsp;        LocalDateTime[] localDateTimeArray2 = new LocalDateTime[]{LocalDateTime.now().minusDays(4), LocalDateTime.now().minusDays(5), LocalDateTime.now().minusDays(6)};</b>
<b class="fc">&nbsp;        LocalDateTime[] localDateTimeArray3 = new LocalDateTime[]{LocalDateTime.now().minusDays(7), LocalDateTime.now().minusDays(8), LocalDateTime.now().minusDays(9)};</b>
<b class="fc">&nbsp;        LocalDateTime[] localDateTimeArray4 = new LocalDateTime[]{LocalDateTime.now().minusDays(10), LocalDateTime.now().minusDays(11), LocalDateTime.now().minusDays(12)};</b>
<b class="fc">&nbsp;        Vertex v1 = this.sqlgGraph.addVertex(T.label, &quot;A&quot;, &quot;name&quot;, localDateTimeArray1);</b>
<b class="fc">&nbsp;        Vertex v2 = this.sqlgGraph.addVertex(T.label, &quot;A&quot;, &quot;name&quot;, localDateTimeArray2);</b>
<b class="fc">&nbsp;        Vertex v3 = this.sqlgGraph.addVertex(T.label, &quot;A&quot;, &quot;name&quot;, localDateTimeArray3);</b>
<b class="fc">&nbsp;        Vertex v4 = this.sqlgGraph.addVertex(T.label, &quot;A&quot;, &quot;name&quot;, localDateTimeArray4);</b>
<b class="fc">&nbsp;        this.sqlgGraph.tx().commit();</b>
<b class="fc">&nbsp;        List&lt;Vertex&gt; vertices = this.sqlgGraph.traversal().V().hasLabel(&quot;A&quot;).has(&quot;name&quot;, P.within(localDateTimeArray1, localDateTimeArray3, localDateTimeArray4)).toList();</b>
<b class="fc">&nbsp;        Assert.assertEquals(3, vertices.size());</b>
<b class="fc">&nbsp;        Assert.assertTrue(Arrays.asList(v1, v3, v4).containsAll(vertices));</b>
&nbsp;    }
&nbsp;
&nbsp;    @Test
&nbsp;    public void testBulkWithinLocalTime() {
<b class="fc">&nbsp;        LocalTime localTime1 = LocalTime.now();</b>
<b class="fc">&nbsp;        LocalTime localTime2 = LocalTime.now().minusHours(1);</b>
<b class="fc">&nbsp;        LocalTime localTime3 = LocalTime.now().minusHours(2);</b>
<b class="fc">&nbsp;        LOGGER.debug(localTime1.toString());</b>
<b class="fc">&nbsp;        LOGGER.debug(localTime2.toString());</b>
<b class="fc">&nbsp;        LOGGER.debug(localTime3.toString());</b>
<b class="fc">&nbsp;        LOGGER.debug(Calendar.getInstance().getTimeZone().toString());</b>
<b class="fc">&nbsp;        this.sqlgGraph.addVertex(T.label, &quot;A&quot;, &quot;name&quot;, localTime1);</b>
<b class="fc">&nbsp;        this.sqlgGraph.addVertex(T.label, &quot;A&quot;, &quot;name&quot;, localTime2);</b>
<b class="fc">&nbsp;        this.sqlgGraph.addVertex(T.label, &quot;A&quot;, &quot;name&quot;, localTime3);</b>
<b class="fc">&nbsp;        this.sqlgGraph.tx().commit();</b>
<b class="fc">&nbsp;        List&lt;Vertex&gt; vertices = this.sqlgGraph.traversal().V().hasLabel(&quot;A&quot;).has(&quot;name&quot;, P.within(localTime1, localTime2, localTime3)).toList();</b>
<b class="fc">&nbsp;        Assert.assertEquals(3, vertices.size());</b>
&nbsp;    }
&nbsp;
&nbsp;    //TODO https://sourceforge.net/p/hsqldb/bugs/1495/
&nbsp;    @Test
&nbsp;    public void testBulkWithin_LocalTimeArray() {
<b class="fc">&nbsp;        Assume.assumeFalse(this.sqlgGraph.getSqlDialect().isHsqldb());</b>
<b class="fc">&nbsp;        Assume.assumeTrue(this.sqlgGraph.getSqlDialect().supportsLocalTimeArrayValues());</b>
<b class="fc">&nbsp;        LocalTime[] localTimeArray1 = new LocalTime[]{LocalTime.now().minusHours(1), LocalTime.now().minusHours(2), LocalTime.now().minusHours(3)};</b>
<b class="fc">&nbsp;        LocalTime[] localTimeArray2 = new LocalTime[]{LocalTime.now().minusHours(4), LocalTime.now().minusHours(5), LocalTime.now().minusHours(6)};</b>
<b class="fc">&nbsp;        LocalTime[] localTimeArray3 = new LocalTime[]{LocalTime.now().minusHours(7), LocalTime.now().minusHours(8), LocalTime.now().minusHours(9)};</b>
<b class="fc">&nbsp;        LocalTime[] localTimeArray4 = new LocalTime[]{LocalTime.now().minusHours(10), LocalTime.now().minusHours(11), LocalTime.now().minusHours(12)};</b>
<b class="fc">&nbsp;        Vertex v1 = this.sqlgGraph.addVertex(T.label, &quot;A&quot;, &quot;name&quot;, localTimeArray1);</b>
<b class="fc">&nbsp;        Vertex v2 = this.sqlgGraph.addVertex(T.label, &quot;A&quot;, &quot;name&quot;, localTimeArray2);</b>
<b class="fc">&nbsp;        Vertex v3 = this.sqlgGraph.addVertex(T.label, &quot;A&quot;, &quot;name&quot;, localTimeArray3);</b>
<b class="fc">&nbsp;        Vertex v4 = this.sqlgGraph.addVertex(T.label, &quot;A&quot;, &quot;name&quot;, localTimeArray4);</b>
<b class="fc">&nbsp;        this.sqlgGraph.tx().commit();</b>
<b class="fc">&nbsp;        List&lt;Vertex&gt; vertices = this.sqlgGraph.traversal().V().hasLabel(&quot;A&quot;).has(&quot;name&quot;, P.within(localTimeArray1, localTimeArray3, localTimeArray4)).toList();</b>
<b class="fc">&nbsp;        Assert.assertEquals(3, vertices.size());</b>
<b class="fc">&nbsp;        Assert.assertTrue(Arrays.asList(v1, v3, v4).containsAll(vertices));</b>
&nbsp;    }
&nbsp;
&nbsp;    @Test
&nbsp;    public void testBulkWithinJson() {
<b class="fc">&nbsp;        ObjectMapper objectMapper = new ObjectMapper();</b>
<b class="fc">&nbsp;        ObjectNode json1 = objectMapper.createObjectNode();</b>
<b class="fc">&nbsp;        json1.put(&quot;test&quot;, &quot;aaa&quot;);</b>
<b class="fc">&nbsp;        ObjectNode json2 = objectMapper.createObjectNode();</b>
<b class="fc">&nbsp;        json2.put(&quot;test&quot;, &quot;bbb&quot;);</b>
<b class="fc">&nbsp;        ObjectNode json3 = objectMapper.createObjectNode();</b>
<b class="fc">&nbsp;        json3.put(&quot;test&quot;, &quot;ccc&quot;);</b>
<b class="fc">&nbsp;        ObjectNode json4 = objectMapper.createObjectNode();</b>
<b class="fc">&nbsp;        json4.put(&quot;test&quot;, &quot;ddd&quot;);</b>
<b class="fc">&nbsp;        Vertex v1 = this.sqlgGraph.addVertex(T.label, &quot;A&quot;, &quot;name&quot;, json1);</b>
<b class="fc">&nbsp;        Vertex v2 = this.sqlgGraph.addVertex(T.label, &quot;A&quot;, &quot;name&quot;, json2);</b>
<b class="fc">&nbsp;        Vertex v3 = this.sqlgGraph.addVertex(T.label, &quot;A&quot;, &quot;name&quot;, json3);</b>
<b class="fc">&nbsp;        Vertex v4 = this.sqlgGraph.addVertex(T.label, &quot;A&quot;, &quot;name&quot;, json4);</b>
<b class="fc">&nbsp;        this.sqlgGraph.tx().commit();</b>
<b class="fc">&nbsp;        List&lt;Vertex&gt; vertices = this.sqlgGraph.traversal().V().hasLabel(&quot;A&quot;).has(&quot;name&quot;, P.within(json1, json3, json4)).toList();</b>
<b class="fc">&nbsp;        Assert.assertEquals(3, vertices.size());</b>
<b class="fc">&nbsp;        Assert.assertTrue(Arrays.asList(v1, v3, v4).containsAll(vertices));</b>
&nbsp;    }
&nbsp;
&nbsp;    @Test
&nbsp;    public void testBulkWithinJsonArray() {
<b class="fc">&nbsp;        Assume.assumeTrue(this.sqlgGraph.getSqlDialect().supportsJsonArrayValues());</b>
<b class="fc">&nbsp;        ObjectNode json1_1 = Topology.OBJECT_MAPPER.createObjectNode();</b>
<b class="fc">&nbsp;        json1_1.put(&quot;test&quot;, &quot;aaa&quot;);</b>
<b class="fc">&nbsp;        ObjectNode json1_2 = Topology.OBJECT_MAPPER.createObjectNode();</b>
<b class="fc">&nbsp;        json1_2.put(&quot;test&quot;, &quot;bbb&quot;);</b>
<b class="fc">&nbsp;        ObjectNode json1_3 = Topology.OBJECT_MAPPER.createObjectNode();</b>
<b class="fc">&nbsp;        json1_3.put(&quot;test&quot;, &quot;ccc&quot;);</b>
<b class="fc">&nbsp;        ObjectNode json1_4 = Topology.OBJECT_MAPPER.createObjectNode();</b>
<b class="fc">&nbsp;        json1_4.put(&quot;test&quot;, &quot;ddd&quot;);</b>
&nbsp;
<b class="fc">&nbsp;        ObjectNode[] jsons1 = new ObjectNode[]{json1_1, json1_2, json1_3, json1_4};</b>
&nbsp;
<b class="fc">&nbsp;        ObjectNode json2_1 = Topology.OBJECT_MAPPER.createObjectNode();</b>
<b class="fc">&nbsp;        json2_1.put(&quot;test&quot;, &quot;eee&quot;);</b>
<b class="fc">&nbsp;        ObjectNode json2_2 = Topology.OBJECT_MAPPER.createObjectNode();</b>
<b class="fc">&nbsp;        json2_2.put(&quot;test&quot;, &quot;fff&quot;);</b>
<b class="fc">&nbsp;        ObjectNode json2_3 = Topology.OBJECT_MAPPER.createObjectNode();</b>
<b class="fc">&nbsp;        json2_3.put(&quot;test&quot;, &quot;ggg&quot;);</b>
<b class="fc">&nbsp;        ObjectNode json2_4 = Topology.OBJECT_MAPPER.createObjectNode();</b>
<b class="fc">&nbsp;        json2_4.put(&quot;test&quot;, &quot;hhh&quot;);</b>
&nbsp;
<b class="fc">&nbsp;        ObjectNode[] jsons2 = new ObjectNode[]{json2_1, json2_2, json2_3, json2_4};</b>
&nbsp;
<b class="fc">&nbsp;        ObjectNode json3_1 = Topology.OBJECT_MAPPER.createObjectNode();</b>
<b class="fc">&nbsp;        json3_1.put(&quot;test&quot;, &quot;iii&quot;);</b>
<b class="fc">&nbsp;        ObjectNode json3_2 = Topology.OBJECT_MAPPER.createObjectNode();</b>
<b class="fc">&nbsp;        json3_2.put(&quot;test&quot;, &quot;jjj&quot;);</b>
<b class="fc">&nbsp;        ObjectNode json3_3 = Topology.OBJECT_MAPPER.createObjectNode();</b>
<b class="fc">&nbsp;        json3_3.put(&quot;test&quot;, &quot;kkk&quot;);</b>
<b class="fc">&nbsp;        ObjectNode json3_4 = Topology.OBJECT_MAPPER.createObjectNode();</b>
<b class="fc">&nbsp;        json3_4.put(&quot;test&quot;, &quot;lll&quot;);</b>
&nbsp;
<b class="fc">&nbsp;        ObjectNode[] jsons3 = new ObjectNode[]{json3_1, json3_2, json3_3, json3_4};</b>
&nbsp;
<b class="fc">&nbsp;        ObjectNode json4_1 = Topology.OBJECT_MAPPER.createObjectNode();</b>
<b class="fc">&nbsp;        json4_1.put(&quot;test&quot;, &quot;mmm&quot;);</b>
<b class="fc">&nbsp;        ObjectNode json4_2 = Topology.OBJECT_MAPPER.createObjectNode();</b>
<b class="fc">&nbsp;        json4_2.put(&quot;test&quot;, &quot;nnn&quot;);</b>
<b class="fc">&nbsp;        ObjectNode json4_3 = Topology.OBJECT_MAPPER.createObjectNode();</b>
<b class="fc">&nbsp;        json4_3.put(&quot;test&quot;, &quot;ooo&quot;);</b>
<b class="fc">&nbsp;        ObjectNode json4_4 = Topology.OBJECT_MAPPER.createObjectNode();</b>
<b class="fc">&nbsp;        json4_4.put(&quot;test&quot;, &quot;ppp&quot;);</b>
&nbsp;
<b class="fc">&nbsp;        ObjectNode[] jsons4 = new ObjectNode[]{json4_1, json4_2, json4_3, json4_4};</b>
&nbsp;
<b class="fc">&nbsp;        Vertex v1 = this.sqlgGraph.addVertex(T.label, &quot;A&quot;, &quot;name&quot;, jsons1);</b>
<b class="fc">&nbsp;        Vertex v2 = this.sqlgGraph.addVertex(T.label, &quot;A&quot;, &quot;name&quot;, jsons2);</b>
<b class="fc">&nbsp;        Vertex v3 = this.sqlgGraph.addVertex(T.label, &quot;A&quot;, &quot;name&quot;, jsons3);</b>
<b class="fc">&nbsp;        Vertex v4 = this.sqlgGraph.addVertex(T.label, &quot;A&quot;, &quot;name&quot;, jsons4);</b>
<b class="fc">&nbsp;        this.sqlgGraph.tx().commit();</b>
<b class="fc">&nbsp;        List&lt;Vertex&gt; vertices = this.sqlgGraph.traversal().V().hasLabel(&quot;A&quot;).has(&quot;name&quot;, P.within(jsons1, jsons3, jsons4)).toList();</b>
<b class="fc">&nbsp;        Assert.assertEquals(3, vertices.size());</b>
<b class="fc">&nbsp;        Assert.assertTrue(Arrays.asList(v1, v3, v4).containsAll(vertices));</b>
&nbsp;    }
&nbsp;
&nbsp;    //TODO ZonedDateTime, Period, Duration
&nbsp;
&nbsp;    @Test
&nbsp;    public void testBulkWithin() throws InterruptedException {
<b class="pc">&nbsp;        if (this.sqlgGraph.getSqlDialect().supportsBatchMode()) {</b>
<b class="fc">&nbsp;            this.sqlgGraph.tx().normalBatchModeOn();</b>
&nbsp;        }
<b class="fc">&nbsp;        Vertex god = this.sqlgGraph.addVertex(T.label, &quot;God&quot;);</b>
<b class="fc">&nbsp;        List&lt;String&gt; uuids = new ArrayList&lt;&gt;();</b>
<b class="fc">&nbsp;        for (int i = 0; i &lt; 100; i++) {</b>
<b class="fc">&nbsp;            String uuid = UUID.randomUUID().toString();</b>
<b class="fc">&nbsp;            uuids.add(uuid);</b>
<b class="fc">&nbsp;            Vertex person = this.sqlgGraph.addVertex(T.label, &quot;Person&quot;, &quot;idNumber&quot;, uuid);</b>
<b class="fc">&nbsp;            god.addEdge(&quot;creator&quot;, person);</b>
&nbsp;        }
<b class="fc">&nbsp;        this.sqlgGraph.tx().commit();</b>
<b class="fc">&nbsp;        testBulkWithin_assert(this.sqlgGraph, uuids);</b>
<b class="pc">&nbsp;        if (this.sqlgGraph1 != null) {</b>
<b class="fc">&nbsp;            Thread.sleep(SLEEP_TIME);</b>
<b class="fc">&nbsp;            testBulkWithin_assert(this.sqlgGraph1, uuids);</b>
&nbsp;        }
&nbsp;    }
&nbsp;
&nbsp;    private void testBulkWithin_assert(SqlgGraph sqlgGraph, List&lt;String&gt; uuids) {
<b class="fc">&nbsp;        List&lt;Vertex&gt; persons = sqlgGraph.traversal().V().hasLabel(&quot;God&quot;).out().has(&quot;idNumber&quot;, P.within(uuids.subList(0, 2).toArray())).toList();</b>
<b class="fc">&nbsp;        Assert.assertEquals(2, persons.size());</b>
<b class="fc">&nbsp;        persons = sqlgGraph.traversal().V().hasLabel(&quot;God&quot;).out().has(&quot;idNumber&quot;, P.within(uuids.toArray())).toList();</b>
<b class="fc">&nbsp;        Assert.assertEquals(100, persons.size());</b>
&nbsp;    }
&nbsp;
&nbsp;    @Test
&nbsp;    public void testBulkWithinMultipleHasContainers() throws InterruptedException {
<b class="fc">&nbsp;        StopWatch stopWatch = new StopWatch();</b>
<b class="fc">&nbsp;        stopWatch.start();</b>
<b class="pc">&nbsp;        if (this.sqlgGraph.getSqlDialect().supportsBatchMode()) {</b>
<b class="fc">&nbsp;            this.sqlgGraph.tx().normalBatchModeOn();</b>
&nbsp;        }
<b class="fc">&nbsp;        Vertex god = this.sqlgGraph.addVertex(T.label, &quot;God&quot;);</b>
<b class="fc">&nbsp;        Vertex person1 = this.sqlgGraph.addVertex(T.label, &quot;Person&quot;, &quot;idNumber&quot;, 1, &quot;name&quot;, &quot;pete&quot;);</b>
<b class="fc">&nbsp;        god.addEdge(&quot;creator&quot;, person1);</b>
<b class="fc">&nbsp;        Vertex person2 = this.sqlgGraph.addVertex(T.label, &quot;Person&quot;, &quot;idNumber&quot;, 2, &quot;name&quot;, &quot;pete&quot;);</b>
<b class="fc">&nbsp;        god.addEdge(&quot;creator&quot;, person2);</b>
<b class="fc">&nbsp;        Vertex person3 = this.sqlgGraph.addVertex(T.label, &quot;Person&quot;, &quot;idNumber&quot;, 3, &quot;name&quot;, &quot;john&quot;);</b>
<b class="fc">&nbsp;        god.addEdge(&quot;creator&quot;, person3);</b>
<b class="fc">&nbsp;        Vertex person4 = this.sqlgGraph.addVertex(T.label, &quot;Person&quot;, &quot;idNumber&quot;, 4, &quot;name&quot;, &quot;pete&quot;);</b>
<b class="fc">&nbsp;        god.addEdge(&quot;creator&quot;, person4);</b>
<b class="fc">&nbsp;        Vertex person5 = this.sqlgGraph.addVertex(T.label, &quot;Person&quot;, &quot;idNumber&quot;, 5, &quot;name&quot;, &quot;pete&quot;);</b>
<b class="fc">&nbsp;        god.addEdge(&quot;creator&quot;, person5);</b>
<b class="fc">&nbsp;        Vertex person6 = this.sqlgGraph.addVertex(T.label, &quot;Person&quot;, &quot;idNumber&quot;, 6, &quot;name&quot;, &quot;pete&quot;);</b>
<b class="fc">&nbsp;        god.addEdge(&quot;creator&quot;, person6);</b>
<b class="fc">&nbsp;        Vertex person7 = this.sqlgGraph.addVertex(T.label, &quot;Person&quot;, &quot;idNumber&quot;, 7, &quot;name&quot;, &quot;pete&quot;);</b>
<b class="fc">&nbsp;        god.addEdge(&quot;creator&quot;, person7);</b>
<b class="fc">&nbsp;        Vertex person8 = this.sqlgGraph.addVertex(T.label, &quot;Person&quot;, &quot;idNumber&quot;, 8, &quot;name&quot;, &quot;pete&quot;);</b>
<b class="fc">&nbsp;        god.addEdge(&quot;creator&quot;, person8);</b>
<b class="fc">&nbsp;        Vertex person9 = this.sqlgGraph.addVertex(T.label, &quot;Person&quot;, &quot;idNumber&quot;, 9, &quot;name&quot;, &quot;pete&quot;);</b>
<b class="fc">&nbsp;        god.addEdge(&quot;creator&quot;, person9);</b>
<b class="fc">&nbsp;        Vertex person10 = this.sqlgGraph.addVertex(T.label, &quot;Person&quot;, &quot;idNumber&quot;, 10, &quot;name&quot;, &quot;pete&quot;);</b>
<b class="fc">&nbsp;        god.addEdge(&quot;creator&quot;, person10);</b>
&nbsp;
<b class="fc">&nbsp;        this.sqlgGraph.tx().commit();</b>
<b class="fc">&nbsp;        stopWatch.stop();</b>
<b class="fc">&nbsp;        System.out.println(stopWatch.toString());</b>
<b class="fc">&nbsp;        stopWatch.reset();</b>
<b class="fc">&nbsp;        stopWatch.start();</b>
<b class="fc">&nbsp;        testBulkWithinMultipleHasContrainers_assert(this.sqlgGraph);</b>
<b class="pc">&nbsp;        if (this.sqlgGraph1 != null) {</b>
<b class="fc">&nbsp;            Thread.sleep(SLEEP_TIME);</b>
<b class="fc">&nbsp;            testBulkWithinMultipleHasContrainers_assert(this.sqlgGraph);</b>
&nbsp;        }
<b class="fc">&nbsp;        stopWatch.stop();</b>
<b class="fc">&nbsp;        System.out.println(stopWatch.toString());</b>
&nbsp;    }
&nbsp;
&nbsp;    private void testBulkWithinMultipleHasContrainers_assert(SqlgGraph sqlgGraph) {
<b class="fc">&nbsp;        List&lt;Vertex&gt; persons = sqlgGraph.traversal().V()</b>
<b class="fc">&nbsp;                .hasLabel(&quot;God&quot;)</b>
<b class="fc">&nbsp;                .out()</b>
<b class="fc">&nbsp;                .has(&quot;name&quot;, &quot;pete&quot;)</b>
<b class="fc">&nbsp;                .has(&quot;idNumber&quot;, P.within(1, 2, 3))</b>
<b class="fc">&nbsp;                .toList();</b>
<b class="fc">&nbsp;        Assert.assertEquals(2, persons.size());</b>
&nbsp;    }
&nbsp;
&nbsp;    @Test
&nbsp;    public void testBulkWithinVertexCompileStep() throws InterruptedException {
<b class="fc">&nbsp;        StopWatch stopWatch = new StopWatch();</b>
<b class="fc">&nbsp;        stopWatch.start();</b>
<b class="pc">&nbsp;        if (this.sqlgGraph.getSqlDialect().supportsBatchMode()) {</b>
<b class="fc">&nbsp;            this.sqlgGraph.tx().normalBatchModeOn();</b>
&nbsp;        }
<b class="fc">&nbsp;        Vertex god = this.sqlgGraph.addVertex(T.label, &quot;God&quot;);</b>
<b class="fc">&nbsp;        List&lt;String&gt; uuids = new ArrayList&lt;&gt;();</b>
<b class="fc">&nbsp;        for (int i = 0; i &lt; 100; i++) {</b>
<b class="fc">&nbsp;            String uuid = UUID.randomUUID().toString();</b>
<b class="fc">&nbsp;            uuids.add(uuid);</b>
<b class="fc">&nbsp;            Vertex person = this.sqlgGraph.addVertex(T.label, &quot;Person&quot;, &quot;idNumber&quot;, uuid);</b>
<b class="fc">&nbsp;            god.addEdge(&quot;creator&quot;, person);</b>
&nbsp;        }
<b class="fc">&nbsp;        this.sqlgGraph.tx().commit();</b>
<b class="fc">&nbsp;        stopWatch.stop();</b>
<b class="fc">&nbsp;        System.out.println(stopWatch.toString());</b>
<b class="fc">&nbsp;        stopWatch.reset();</b>
<b class="fc">&nbsp;        stopWatch.start();</b>
<b class="fc">&nbsp;        testBulkWithinVertexCompileStep_assert(this.sqlgGraph, god, uuids);</b>
<b class="pc">&nbsp;        if (this.sqlgGraph1 != null) {</b>
<b class="fc">&nbsp;            Thread.sleep(SLEEP_TIME);</b>
<b class="fc">&nbsp;            testBulkWithinVertexCompileStep_assert(this.sqlgGraph1, god, uuids);</b>
&nbsp;        }
<b class="fc">&nbsp;        stopWatch.stop();</b>
<b class="fc">&nbsp;        System.out.println(stopWatch.toString());</b>
&nbsp;
&nbsp;    }
&nbsp;
&nbsp;    private void testBulkWithinVertexCompileStep_assert(SqlgGraph sqlgGraph, Vertex god, List&lt;String&gt; uuids) {
<b class="fc">&nbsp;        List&lt;Vertex&gt; persons = sqlgGraph.traversal().V(god.id()).out().has(&quot;idNumber&quot;, P.within(uuids.subList(0, 2).toArray())).toList();</b>
<b class="fc">&nbsp;        Assert.assertEquals(2, persons.size());</b>
<b class="fc">&nbsp;        persons = sqlgGraph.traversal().V().hasLabel(&quot;God&quot;).out().has(&quot;idNumber&quot;, P.within(uuids.toArray())).toList();</b>
<b class="fc">&nbsp;        Assert.assertEquals(100, persons.size());</b>
&nbsp;    }
&nbsp;
&nbsp;    @Test
&nbsp;    public void testBulkWithinWithPercentageInJoinProperties() throws InterruptedException {
<b class="fc">&nbsp;        StopWatch stopWatch = new StopWatch();</b>
<b class="fc">&nbsp;        stopWatch.start();</b>
<b class="pc">&nbsp;        if (this.sqlgGraph.getSqlDialect().supportsBatchMode()) {</b>
<b class="fc">&nbsp;            this.sqlgGraph.tx().normalBatchModeOn();</b>
&nbsp;        }
<b class="fc">&nbsp;        Vertex god = this.sqlgGraph.addVertex(T.label, &quot;God&quot;);</b>
<b class="fc">&nbsp;        List&lt;String&gt; uuids = new ArrayList&lt;&gt;();</b>
<b class="fc">&nbsp;        for (int i = 0; i &lt; 100; i++) {</b>
<b class="fc">&nbsp;            String uuid = UUID.randomUUID().toString();</b>
<b class="fc">&nbsp;            uuids.add(&quot;\&quot;BLRNC5-&gt;CXC4030052~%%%~FAJ1211373~%%%~2015-07-19~%%%~9999-12-31~%%%~Enabled~%%%~Licensed~%%%~Improved~%%%~compressed~%%%~mode~%%%~handling.~%%%~Restricted:~%%%~\&quot;\&quot;Partial.~%%%~Feature~%%%~is~%%%~restricted~%%%~in~%%%~RNC~%%%~W12B~%%%~SW.~%%%~RNC~%%%~W13.0.1.1~%%%~or~%%%~later~%%%~SW~%%%~is~%%%~required~%%%~in~%%%~order~%%%~to~%%%~run~%%%~this~%%%~feature.~%%%~For~%%%~RBS~%%%~W12.1.2.2/~%%%~W13.0.0.0~%%%~or~%%%~later~%%%~is~%%%~required.~%%%~OSS-RC~%%%~12.2~%%%~or~%%%~later~%%%~is~%%%~required.\&quot;\&quot;.~%%%~GA:~%%%~W13A\&quot;&quot; + uuid);</b>
<b class="fc">&nbsp;            Vertex person = this.sqlgGraph.addVertex(T.label, &quot;Person&quot;, &quot;idNumber&quot;, &quot;\&quot;BLRNC5-&gt;CXC4030052~%%%~FAJ1211373~%%%~2015-07-19~%%%~9999-12-31~%%%~Enabled~%%%~Licensed~%%%~Improved~%%%~compressed~%%%~mode~%%%~handling.~%%%~Restricted:~%%%~\&quot;\&quot;Partial.~%%%~Feature~%%%~is~%%%~restricted~%%%~in~%%%~RNC~%%%~W12B~%%%~SW.~%%%~RNC~%%%~W13.0.1.1~%%%~or~%%%~later~%%%~SW~%%%~is~%%%~required~%%%~in~%%%~order~%%%~to~%%%~run~%%%~this~%%%~feature.~%%%~For~%%%~RBS~%%%~W12.1.2.2/~%%%~W13.0.0.0~%%%~or~%%%~later~%%%~is~%%%~required.~%%%~OSS-RC~%%%~12.2~%%%~or~%%%~later~%%%~is~%%%~required.\&quot;\&quot;.~%%%~GA:~%%%~W13A\&quot;&quot; + uuid);</b>
<b class="fc">&nbsp;            god.addEdge(&quot;creator&quot;, person);</b>
&nbsp;        }
<b class="fc">&nbsp;        this.sqlgGraph.tx().commit();</b>
<b class="fc">&nbsp;        stopWatch.stop();</b>
<b class="fc">&nbsp;        LOGGER.debug(stopWatch.toString());</b>
<b class="fc">&nbsp;        stopWatch.reset();</b>
<b class="fc">&nbsp;        stopWatch.start();</b>
<b class="fc">&nbsp;        testBulkWithinWithPercentageInJoinProperties_assert(this.sqlgGraph, uuids);</b>
<b class="pc">&nbsp;        if (this.sqlgGraph1 != null) {</b>
<b class="fc">&nbsp;            Thread.sleep(SLEEP_TIME);</b>
<b class="fc">&nbsp;            testBulkWithinWithPercentageInJoinProperties_assert(this.sqlgGraph1, uuids);</b>
&nbsp;        }
<b class="fc">&nbsp;        stopWatch.stop();</b>
<b class="fc">&nbsp;        LOGGER.debug(stopWatch.toString());</b>
&nbsp;    }
&nbsp;
&nbsp;    private void testBulkWithinWithPercentageInJoinProperties_assert(SqlgGraph sqlgGraph, List&lt;String&gt; uuids) {
<b class="fc">&nbsp;        List&lt;Vertex&gt; persons = sqlgGraph.traversal().V().hasLabel(&quot;God&quot;).out().has(&quot;idNumber&quot;, P.within(uuids.subList(0, 2).toArray())).toList();</b>
<b class="fc">&nbsp;        Assert.assertEquals(2, persons.size());</b>
<b class="fc">&nbsp;        persons = this.sqlgGraph.traversal().V().hasLabel(&quot;God&quot;).out().has(&quot;idNumber&quot;, P.within(uuids.toArray())).toList();</b>
<b class="fc">&nbsp;        Assert.assertEquals(100, persons.size());</b>
&nbsp;    }
&nbsp;}
</code>
</pre>
</div>

<script type="text/javascript">
(function() {
    var msie = false, msie9 = false;
    /*@cc_on
      msie = true;
      @if (@_jscript_version >= 9)
        msie9 = true;
      @end
    @*/

    if (!msie || msie && msie9) {
      hljs.highlightAll()
      hljs.initLineNumbersOnLoad();
    }
})();
</script>

<div class="footer">
    
    <div style="float:right;">generated on 2025-06-23 10:13</div>
</div>
</body>
</html>
